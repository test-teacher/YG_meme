<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="gameTitle">–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –ú–µ–º–æ–≤</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://yandex.ru/games/sdk/v2"></script>
</head>
<body>
    
    <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-spinner">
                <div class="spinner"></div>
            </div>
            <h2 class="loading-title">üé≠ –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –ú–µ–º–æ–≤ üé≠</h2>
            <p class="loading-subtitle">–ó–∞–≥—Ä—É–∂–∞–µ–º –º–µ–º—ã —Å—Ç—Ä–∞–Ω –°–ù–ì...</p>
            <div class="loading-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">0%</span>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container" id="gameContainer" style="display: none;">
        <header class="header">
            <h1>üé≠ –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –ú–µ–º–æ–≤ üé≠</h1>
            <p class="subtitle">–£–≥–∞–¥–∞–π –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ–º–∞ –ø–æ –∫–∞—Ä—Ç–∏–Ω–∫–µ!</p>
        </header>

        <div class="game-info">
            <div class="lives">
                <span class="lives-label">–ñ–∏–∑–Ω–∏:</span>
                <div class="hearts">
                    <span class="heart">‚ù§Ô∏è</span>
                    <span class="heart">‚ù§Ô∏è</span>
                    <span class="heart">‚ù§Ô∏è</span>
                </div>
            </div>
    
            <div class="controls"> 
                <!-- –ê—É–¥–∏–æ –±–µ–∑ autoplay -->
                <audio src="Sound/compress.mp3" id="soundOn"></audio>
                <audio id="correct-answer-sample" src="Sound/correct-answer.mp3"></audio>
                <audio id="wrong-answer-sample" src="Sound/wrong-answer.mp3"></audio>

                <!-- –ö–Ω–æ–ø–∫–∞ –∑–≤—É–∫–∞ -->
                <button id="soundBtn" class="control-btn" title="–í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫">üîä</button>

                <!-- –ö–Ω–æ–ø–∫–∞ –º—É–∑—ã–∫–∏ -->
                <button id="playbtn" class="control-btn" title="–í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É">‚ñ∂Ô∏è</button>

                <button id="showAdBtn" class="control-btn" title="–†–µ–∫–ª–∞–º–∞ –∑–∞ –±–æ–Ω—É—Å">üì∫</button>
                <button id="shopBtn" class="control-btn" title="–ú–∞–≥–∞–∑–∏–Ω">üõí</button>
            </div>
            
            <div class="level-info">
                <div class="current-level">–£—Ä–æ–≤–µ–Ω—å: <span id="currentLevel">1</span></div>
                <div class="total-levels">–í—Å–µ–≥–æ: <span id="totalLevels">50</span></div>
            </div>
        </div>

        <!-- –æ—Å—Ç–∞–ª—å–Ω–æ–π HTML –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
        <!-- ... -->

    </div>

    <!-- –§–∞–Ω—Ñ–∞—Ä—ã -->
    <div id="visual-fanfare" class="visual-fanfare" style="display: none;">
        <div class="fanfare-text">üéâ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ</div>
    </div>

    <script>
        // –§–ª–∞–≥: –±—ã–ª –ª–∏ –ø–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∂–µ—Å—Ç
        let userGestureOccurred = false;
        const bgMusic = document.getElementById('soundOn');
        const correctSound = document.getElementById('correct-answer-sample');
        const wrongSound = document.getElementById('wrong-answer-sample');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—É–¥–∏–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–∫–∞
        function initAudio() {
            if (userGestureOccurred) return;
            userGestureOccurred = true;

            // –ü—Ä–æ–±—É–µ–º –ø—Ä–æ–∏–≥—Ä–∞—Ç—å —Ç–∏—Ö–æ (–Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä —Ç—Ä–µ–±—É–µ—Ç)
            bgMusic.play().catch(() => {});
            correctSound.play().catch(() => {});
            wrongSound.play().catch(() => {});

            // –°—Ä–∞–∑—É —Å—Ç–∞–≤–∏–º –Ω–∞ –ø–∞—É–∑—É, —á—Ç–æ–±—ã –Ω–µ –∏–≥—Ä–∞–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
            bgMusic.pause();
            correctSound.pause();
            wrongSound.pause();
        }

        // –í–µ—à–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –Ω–∞ –≤–µ—Å—å body (–ª—é–±–æ–π –∫–ª–∏–∫ ‚Äî –∂–µ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
        document.body.addEventListener('click', initAudio, { once: true });
        document.body.addEventListener('touchstart', initAudio, { once: true });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞
        document.getElementById('soundBtn').addEventListener('click', function () {
            const isMuted = this.textContent === 'üîá';
            this.textContent = isMuted ? 'üîä' : 'üîá';
            const muteState = !isMuted;
            bgMusic.muted = muteState;
            correctSound.muted = muteState;
            wrongSound.muted = muteState;
        });

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–æ–π
        document.getElementById('playbtn').addEventListener('click', function () {
            if (bgMusic.paused) {
                if (!userGestureOccurred) {
                    // –ï—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞ ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ
                    initAudio();
                }
                bgMusic.play().catch(err => console.warn("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É:", err));
                this.textContent = "‚è∏Ô∏è";
            } else {
                bgMusic.pause();
                this.textContent = "‚ñ∂Ô∏è";
            }
        });
    </script>

    <script src="script.js"></script>
</body>
</html>